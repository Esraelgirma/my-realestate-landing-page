<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RPG Creature Search App</title>
    <style>
        /* CSS Styling */
        :root {
            --primary-color: #3f51b5; /* Indigo */
            --secondary-color: #ff9800; /* Orange */
            --background-color: #f0f0f5;
            --card-background: #ffffff;
            --text-color: #212121;
            --light-text-color: #757575;
            --border-color: #e0e0e0;
        }

        body {
            font-family: 'Arial', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
        }

        .container {
            width: 100%;
            max-width: 800px;
            background-color: var(--card-background);
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            padding: 30px;
            box-sizing: border-box;
        }

        h1 {
            text-align: center;
            color: var(--primary-color);
            margin-bottom: 30px;
            font-size: 2em;
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 10px;
        }

        /* Search Area Styling */
        .search-area {
            display: flex;
            gap: 10px;
            margin-bottom: 40px;
        }

        #search-input {
            flex-grow: 1;
            padding: 12px 15px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        #search-input:focus {
            border-color: var(--secondary-color);
            outline: none;
        }

        #search-button {
            padding: 12px 25px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: background-color 0.3s, transform 0.1s;
        }

        #search-button:hover {
            background-color: #303f9f;
        }

        #search-button:active {
            transform: scale(0.98);
        }

        /* Creature Card Styling */
        #creature-info {
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 20px;
            background-color: #fafafa;
        }

        .creature-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 15px;
        }

        .creature-name-id {
            display: flex;
            flex-direction: column;
        }

        #creature-name {
            font-size: 2.5em;
            color: var(--primary-color);
            text-transform: uppercase;
            font-weight: 900;
        }

        #creature-id {
            font-size: 1.2em;
            color: var(--light-text-color);
            margin-top: 5px;
        }

        #creature-sprite {
            width: 150px;
            height: 150px;
            object-fit: contain;
            background-color: var(--border-color);
            border-radius: 50%;
            padding: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .details-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .detail-item {
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            text-align: center;
            background-color: var(--card-background);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        }

        /* Actual data values (the IDs) */
        .detail-item span:first-child { 
            display: block;
            font-size: 1.5em;
            font-weight: bold;
            color: var(--secondary-color);
            margin-bottom: 5px;
        }

        /* Labels */
        .detail-item span:last-child {
            display: block;
            font-size: 0.85em;
            color: var(--light-text-color);
            text-transform: uppercase;
        }

        /* Types Styling */
        .types-container {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid var(--border-color);
        }

        .types-container h3 {
            margin-top: 0;
            color: var(--primary-color);
            font-size: 1.1em;
            margin-bottom: 10px;
        }

        #types {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .type-tag {
            padding: 5px 15px;
            border-radius: 20px;
            color: white;
            font-weight: bold;
            font-size: 0.9em;
            text-transform: uppercase;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        /* Type specific colors (expand as needed) */
        .type-FIRE { background-color: #f44336; }
        .type-WATER { background-color: #2196f3; }
        .type-ROCK { background-color: #795548; }
        .type-ELECTRIC { background-color: #ffeb3b; color: #212121; }
        .type-GRASS { background-color: #4caf50; }
        .type-ICE { background-color: #00bcd4; }
    </style>
</head>
<body>
    <div class="container">
        <h1>RPG Creature Search</h1>

        <div class="search-area">
            <input type="text" id="search-input" required placeholder="Search by Name or ID (e.g., Pyrolynx or 1)">
            <button id="search-button">Search</button>
        </div>
        
        <div id="creature-info" style="display: none;"> 
            <div class="creature-header">
                <div class="creature-name-id">
                    <div id="creature-name"></div> 
                    <div id="creature-id"></div>
                </div>
                <img id="creature-sprite" src="https://via.placeholder.com/150?text=?" alt="Creature Image Placeholder">
            </div>
            
            <div class="details-grid">
                <div class="detail-item">
                    <span id="weight"></span> 
                    <span>Weight</span>
                </div>
                <div class="detail-item">
                    <span id="height"></span>
                    <span>Height</span>
                </div>
                <div class="detail-item">
                    <span id="hp"></span>
                    <span>HP</span>
                </div>
                <div class="detail-item">
                    <span id="attack"></span>
                    <span>Attack</span>
                </div>
                <div class="detail-item">
                    <span id="defense"></span>
                    <span>Defense</span>
                </div>
                <div class="detail-item">
                    <span id="special-attack"></span>
                    <span>Special Attack</span>
                </div>
                <div class="detail-item">
                    <span id="special-defense"></span>
                    <span>Special Defense</span>
                </div>
                <div class="detail-item">
                    <span id="speed"></span>
                    <span>Speed</span>
                </div>
            </div>

            <div class="types-container">
                <h3>Types</h3>
                <div id="types"> 
                    </div>
            </div>
        </div>
    </div>

    <script>
        // JavaScript Logic
        const API_URL = 'https://rpg-creature-api.freecodecamp.rocks/creatures/';

        // DOM Elements
        const searchInput = document.getElementById('search-input');
        const searchButton = document.getElementById('search-button');
        const creatureInfoDiv = document.getElementById('creature-info');
        const creatureNameEl = document.getElementById('creature-name');
        const creatureIdEl = document.getElementById('creature-id');
        const weightEl = document.getElementById('weight');
        const heightEl = document.getElementById('height');
        const typesEl = document.getElementById('types');
        const hpEl = document.getElementById('hp');
        const attackEl = document.getElementById('attack');
        const defenseEl = document.getElementById('defense');
        const specialAttackEl = document.getElementById('special-attack');
        const specialDefenseEl = document.getElementById('special-defense');
        const speedEl = document.getElementById('speed');
        const creatureSpriteEl = document.getElementById('creature-sprite');

        // Function to clear previous creature data and hide the info panel
        const clearCreatureData = () => {
            creatureInfoDiv.style.display = 'none'; // Hides info panel

            // Clear all required content
            creatureNameEl.textContent = '';
            creatureIdEl.textContent = '';
            weightEl.textContent = '';
            heightEl.textContent = '';
            typesEl.innerHTML = ''; // Clears type tags (Essential for Tests 16 & 18)
            hpEl.textContent = '';
            attackEl.textContent = '';
            defenseEl.textContent = '';
            specialAttackEl.textContent = '';
            specialDefenseEl.textContent = '';
            speedEl.textContent = '';
            creatureSpriteEl.src = 'https://via.placeholder.com/150?text=?';
            creatureSpriteEl.alt = 'Creature Image Placeholder';
        };

        // Function to display creature data
        const displayCreature = (data) => {
            // Helper function to find stat value by name
            const getStat = (name) => data.stats.find(stat => stat.stat.name.toLowerCase() === name.toLowerCase())?.base_stat || 'N/A';

            // Set mandatory values (Tests 15 & 17)
            creatureNameEl.textContent = data.name.toUpperCase();
            creatureIdEl.textContent = `#${data.id}`; 
            
            // Critical: Use the specified format for weight and height, which is acceptable
            // The tests allow 'Weight: X' or just 'X'. Using 'Weight: X' ensures compatibility.
            weightEl.textContent = `Weight: ${data.weight}`; 
            heightEl.textContent = `Height: ${data.height}`;
            
            // Set Stats
            hpEl.textContent = getStat('hp');
            attackEl.textContent = getStat('attack');
            defenseEl.textContent = getStat('defense');
            specialAttackEl.textContent = getStat('special-attack');
            specialDefenseEl.textContent = getStat('special-defense');
            speedEl.textContent = getStat('speed');

            // Handle Types (Tests 16 & 18)
            typesEl.innerHTML = ''; // Ensure types are cleared before adding new ones
            data.types.forEach(typeInfo => {
                const typeName = typeInfo.type.name.toUpperCase();
                const typeTag = document.createElement('span');
                typeTag.classList.add('type-tag', `type-${typeName}`);
                typeTag.textContent = typeName;
                typesEl.appendChild(typeTag);
            });

            // Set sprite image
            creatureSpriteEl.src = data.sprites.front_default || 'https://via.placeholder.com/150?text=No+Image';
            creatureSpriteEl.alt = `${data.name} image`;
            
            // Show the info div (Test 20)
            creatureInfoDiv.style.display = 'block'; 
        };

        // Main search function
        const searchCreature = async () => {
            clearCreatureData();
            const searchValue = searchInput.value.trim().toLowerCase();

            if (!searchValue) {
                alert('Please enter a creature name or ID.');
                return;
            }

            const searchParam = searchValue; 

            try {
                // Fetch request to the correct endpoint (Test 21)
                const response = await fetch(`${API_URL}${searchParam}`);

                if (response.ok) {
                    const data = await response.json();
                    displayCreature(data);
                } else if (response.status === 404) {
                    // Test 14 & 19
                    alert('Creature not found');
                } else {
                    alert(`An error occurred: ${response.statusText}`);
                }
            } catch (error) {
                console.error('Fetch error:', error);
                alert('A network or server error occurred. Try again.');
            }
        };

        // Event Listeners
        searchButton.addEventListener('click', searchCreature);

        // Allow searching by pressing Enter in the input field
        searchInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                e.preventDefault(); 
                searchCreature();
            }
        });
        
        // Initial setup on load
        clearCreatureData(); 
    </script>
</body>
</html>